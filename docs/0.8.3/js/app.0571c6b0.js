(function(){var e={2929:function(e,t,n){"use strict";var a=n(9242),i=n(3396);function s(e,t,n,a,s,r){const o=(0,i.up)("RadarView");return(0,i.wg)(),(0,i.j4)(o)}const r={id:"radar"},o={key:0},l={key:1};function d(e,t,n,a,s,d){const c=(0,i.up)("TabFrameSearch"),u=(0,i.up)("TabSyncOptions");return(0,i.wg)(),(0,i.iD)("div",r,[s.hasPlugin?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(c),(0,i.Wm)(u)])):(0,i.kq)("",!0),s.hasPlugin?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",l," need to install plugin "))])}function c(e,t,n,a,s,r){const o=(0,i.up)("SearchContainer"),l=(0,i.up)("TabContainer"),d=(0,i.up)("FramesContainer"),c=(0,i.up)("NewNoteContainer");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{title:"search tab",subtitle:s.selectedTags.length>0?s.selectedTags:""},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{title:"searcher","default-activation":"true",padding:"5px","padding-left":"15px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{onSelectedTags:r.setSelectedTags,addTagToSelection:s.tagToAdd},null,8,["onSelectedTags","addTagToSelection"])])),_:1}),(0,i.Wm)(l,{title:"frames","default-activation":"true",padding:"5px","padding-left":"15px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{"selected-tags":s.selectedTags,onSelectTag:r.selectTag},null,8,["selected-tags","onSelectTag"])])),_:1}),(0,i.Wm)(l,{title:"new note",padding:"5px","padding-left":"15px",disabled:0===s.selectedTags.length,"is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{tags:s.selectedTags},null,8,["tags"])])),_:1},8,["disabled"])])),_:1},8,["subtitle"])])}var u=n(7139);const g={id:"tab",ref:"tab",class:"tab"},m={type:"checkbox",ref:"chck1"};function h(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("input",m,null,512),(0,i._)("label",{class:(0,u.C_)(["tab-label",{"label-open":o.isActive,disabled:o.isDisabled,inner:n.isInner}]),style:(0,u.j5)({"padding-left":n.paddingLeft}),onClick:t[0]||(t[0]=(...e)=>o.openTab&&o.openTab(...e)),draggable:"true"},(0,u.zw)(n.title)+(0,u.zw)(n.subtitle?" - "+n.subtitle:""),7),(0,i.wy)((0,i._)("div",{class:"tab-content",style:(0,u.j5)({"min-height":n.minHeight,padding:n.padding}),ref:"content"},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],4),[[a.F8,o.isActive]]),n.canResize&&o.isActive?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"resizer",ref:"resizer",onDrag:t[1]||(t[1]=(...e)=>o.dragMove&&o.dragMove(...e)),draggable:"true"},null,544)):(0,i.kq)("",!0)],512)}var f={name:"TabContainer",props:["title","canResize","defaultActivation","minHeight","padding","subtitle","disabled","paddingLeft","isInner"],data(){return{isActiveButton:null,lastOffetY:null}},watch:{disabled(){this.isActiveButton=null}},computed:{isDisabled(){return this.disabled},isActive(){return!this.isDisabled&&(null===this.isActiveButton?this.defaultActivation:this.isActiveButton)}},methods:{subtitleHere(){console.log("opaaa")},dragMove(e){if(this.lastOffetY){if(e.clientY!==this.lastOffetY&&1===e.buttons){const t=e.clientY-this.lastOffetY;this.lastOffetY=e.clientY,this.$refs.content.style.maxHeight=this.$refs.content.clientHeight+t+"px"}}else this.lastOffetY=e.clientY},openTab(){null===this.isActiveButton&&this.defaultActivation||this.isActiveButton?this.isActiveButton=!1:this.isActiveButton=!0}}},p=n(89);const v=(0,p.Z)(f,[["render",h],["__scopeId","data-v-03c1c4c6"]]);var w=v;const T={class:"header"},b={class:"tag-input-container"},y=["onClick"];function _(e,t,n,s,r,o){const l=(0,i.up)("TagListContainer");return(0,i.wg)(),(0,i.iD)("div",T,[(0,i._)("div",b,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.selectedTags,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{class:"tag-input",key:t},[(0,i._)("span",{onClick:t=>o.removeTag(e)},(0,u.zw)(e),9,y)])))),128)),(0,i.wy)((0,i._)("input",{class:(0,u.C_)({"no-tags":0===r.selectedTags.length}),"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchInput=e),onKeydown:t[1]||(t[1]=(...e)=>o.keydown&&o.keydown(...e)),ref:"input"},null,34),[[a.nr,r.searchInput]])]),(0,i.Wm)(l,{"initial-show":10,onAddTag:o.addTag,tags:this.setDomainsAndTags,class:"tag-list-container"},null,8,["onAddTag","tags"])])}n(7658);const k={class:"tags"},D=["onClick"],C={key:0};function S(e,t,n,a,s,r){return(0,i.wg)(),(0,i.iD)("ul",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.items,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("a",{href:"#",class:"tag",style:(0,u.j5)(r.getCount(e.count)),onClick:t=>r.selectTag(t,e)},(0,u.zw)(e.name),13,D)])))),128)),r.displayShow>0?((0,i.wg)(),(0,i.iD)("li",C,[(0,i._)("a",{href:"#",class:"tag-add",onClick:t[0]||(t[0]=(...e)=>r.showMore&&r.showMore(...e))},"+"+(0,u.zw)(r.displayShow),1)])):(0,i.kq)("",!0)])}var A={name:"TagListContainer",emits:["addTag"],props:["tags","initialShow"],data(){return{styleObject:{"--count":"'12'"},moreToShow:0}},computed:{displayShow(){return this.tags.length-this.initialShow-this.moreToShow},slice(){return this.initialShow+this.moreToShow},items(){const e=JSON.parse(JSON.stringify(this.tags));return e.splice(0,this.slice).sort(((e,t)=>e.count<t.count?1:-1))}},methods:{showMore(){this.moreToShow+=10},getCount(e){return{"--count":`'${e}'`}},selectTag(e,t){this.$emit("addTag",t),e.preventDefault()}}};const I=(0,p.Z)(A,[["render",S],["__scopeId","data-v-31bc07a2"]]);var M=I;function x(e,t){var n=JSON.parse(JSON.stringify(e));return t.length>0&&(n=n.filter((function(e){return t.every((function(t){return e.tags.includes(t)||e.preProcessedTags.includes(t)}))}))),E(n)}function E(e){return e.sort((function(e,t){return e.tags.length>t.tags.length?1:-1}))}function F(e){return e.startsWith("#")?e:"#"+e}function O(e,t,n){n=n.toLowerCase();var a=new Array;return e=N(e,t),e.forEach((function(e){e.tags.forEach((function(e){if((!(n.length>=1)||e.toLowerCase().includes(n))&&!t.includes(e)){var i=a.findIndex((function(t){return t.name===e}));-1===i?a.push({name:F(e),count:1,kind:"tag"}):a[i].count++}})),e.preProcessedTags.forEach((function(e){if((!(n.length>1)||e.toLowerCase().includes(n))&&!t.includes(e)){var i=a.findIndex((function(t){return t.name===e}));-1===i?a.push({name:e,count:1,kind:"preProcessed"}):a[i].count++}}))})),t.length>0&&(a=a.filter((function(t){return t.count<e.length}))),a.sort((function(e,t){return e.count>t.count?-1:1}))}function N(e,t){var n=t.filter((function(e){return e.startsWith("#")})),a=t.filter((function(e){return e.startsWith("@")}));return e.filter((function(e){var t=!(a.length>0)||a.every((function(t){return e.preProcessedTags.includes(t)})),i=!(n.length>0)||n.every((function(t){return e.tags.includes(t)}));return t&&i}))}var L={name:"SearchContainer",emits:["selectedTags"],components:{TagListContainer:M},props:["addTagToSelection"],data(){return{searchInput:"",selectedTags:[]}},watch:{addTagToSelection(e){this.selectedTags.push(e),this.$emit("selectedTags",this.selectedTags)},selectedTags:{handler(){this.searchInput=""},deep:!0}},computed:{frames(){return this.$store.getters.frames},setDomainsAndTags(){return O(this.frames,this.selectedTags,this.searchInput)}},methods:{addTag(e){this.selectedTags.push(e.name),this.$emit("selectedTags",this.selectedTags)},keydown(e){"Backspace"===e.code&&0===this.searchInput.length&&(this.selectedTags.pop(),this.$emit("selectedTags",this.selectedTags),e.preventDefault()),"Enter"===e.code&&this.searchInput.length>1&&(this.selectedTags.push(F(this.searchInput)),this.$emit("selectedTags",this.selectedTags),e.preventDefault())},removeTag(e){this.selectedTags=this.selectedTags.filter((t=>t!==e)),this.$emit("selectedTags",this.selectedTags)}},created(){}};const P=(0,p.Z)(L,[["render",_],["__scopeId","data-v-692a4c35"]]);var $=P;const V=e=>((0,i.dD)("data-v-9c9070e2"),e=e(),(0,i.Cn)(),e),W={class:"frame-container",ref:"frames"},j={key:0},R={key:1},q=V((()=>(0,i._)("div",{class:"divider"},null,-1))),z={key:0,class:"pagination-container"},J={key:1,class:"empty-container"},Z=V((()=>(0,i._)("h2",null,"It's empty",-1)));function U(e,t,n,a,s,r){const o=(0,i.up)("NoteViewContainer"),l=(0,i.up)("NoteEditContainer"),d=(0,i.up)("FrameViewContainer"),c=(0,i.up)("FrameEditorContainer");return(0,i.wg)(),(0,i.iD)("div",W,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.framesFilteredWithLimit,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"frame",key:t,ref_for:!0,ref:"frame"+t},["note"===e.kind?((0,i.wg)(),(0,i.iD)("div",j,[s.editModeIndex!==t?((0,i.wg)(),(0,i.j4)(o,{key:0,note:e,onToEditMode:e=>r.toEditMode(t),onSelectTag:r.selectTag},null,8,["note","onToEditMode","onSelectTag"])):(0,i.kq)("",!0),s.editModeIndex===t?((0,i.wg)(),(0,i.j4)(l,{key:1,frames:r.frames,note:e,onToViewMode:e=>r.toViewMode(t)},null,8,["frames","note","onToViewMode"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),"url"===e.kind?((0,i.wg)(),(0,i.iD)("div",R,[s.editModeIndex!==t?((0,i.wg)(),(0,i.j4)(d,{key:0,frame:e,onToEditMode:e=>r.toEditMode(t),onSelectTag:r.selectTag},null,8,["frame","onToEditMode","onSelectTag"])):(0,i.kq)("",!0),s.editModeIndex===t?((0,i.wg)(),(0,i.j4)(c,{key:1,frames:r.frames,frame:e,onToViewMode:e=>r.toViewMode(t),onApplyChanges:r.applyChanges,onRemoveFrame:r.removeFrame},null,8,["frames","frame","onToViewMode","onApplyChanges","onRemoveFrame"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),q])))),128)),r.totalRemain>0?((0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("small",null,[(0,i._)("span",{onClick:t[0]||(t[0]=(...e)=>r.showAll&&r.showAll(...e))},"click here"),(0,i.Uk)(" to show all "+(0,u.zw)(r.framesFiltered.length)+" frames",1)])])):(0,i.kq)("",!0),0===r.framesFiltered.length?((0,i.wg)(),(0,i.iD)("div",J,[Z,(0,i._)("p",null,(0,u.zw)(r.framesFiltered.length)+" filtered of "+(0,u.zw)(r.frames.length)+" frames",1)])):(0,i.kq)("",!0)],512)}var Y={class:"frame-info-container"},H={class:"frame-info"},K={class:"frame-header"},B={class:"frame-header-left"},G=["src"],X={class:"frame-header-right"},Q={class:"tags"};function ee(e,t,n,s,r,o){var l=(0,i.up)("font-awesome-icon"),d=(0,i.up)("TagViewContainer");return(0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",H,[(0,i._)("div",K,[(0,i._)("div",B,[(0,i._)("img",{src:e.frame.favIconUrl,width:"16"},null,8,G),(0,i._)("small",null,(0,u.zw)(e.frame.domain),1)]),(0,i._)("div",X,[(0,i._)("div",{class:(0,u.C_)(["frame-header-status",{active:e.isOpened}]),title:"current status"},[(0,i.Wm)(l,{icon:"tv"})],2),e.isNewFrame?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"frame-header-edit",onClick:t[0]||(t[0]=function(t){return e.toEditMode()}),title:"edit frame"},[(0,i.Wm)(l,{icon:"edit"})])),e.isNewFrame?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"frame-header-add",onClick:t[1]||(t[1]=function(t){return e.addNewTab()}),title:"add new frame"},[(0,i.Wm)(l,{icon:"square-plus"})])):(0,i.kq)("",!0)])]),(0,i._)("h1",{class:(0,u.C_)(["frame-title",{"current-selected":e.isSelected}]),onClick:t[2]||(t[2]=(0,a.iM)((function(t){return e.goToPage("new")}),["exact"]))},(0,u.zw)(e.frame.title),3),(0,i._)("small",null,(0,u.zw)(e.frame.comment),1),(0,i._)("div",Q,[(0,i.Wm)(d,{tags:e.frame.tags,"fixed-tags":e.frame.preProcessedTags,onClickedTag:e.clickedTag},null,8,["tags","fixed-tags","onClickedTag"])])])])}var te=n(65),ne=function(e){var t=new URL(e).hostname;return t=t.replace("www.",""),t};function ae(e){return e&&e.startsWith("https://")?(e=e.substring(8),e=e.replace("www.",""),e.split("/")[0]):""}function ie(e){var t=ae(e),n=t.split(".");return n.pop(),n=n.filter((function(e){return"com"!==e})),n=n.filter((function(e){return e.length>1})),n}function se(e,t){void 0===t&&(t=[]);var n=new Array;if(0===e.length)return[];var a=e.map((function(e){return e.tags})).reduce((function(e,t){return e=e.concat(t),e})),i=le(a);return e.forEach((function(e){var a=!!e.url;if(a){var s=e,r=ie(s.url),o=oe(s.url,t);o&&r.push(o),n.push({favIconUrl:s.favIconUrl,title:s.title,preProcessedTags:r.map((function(e){return re(e)})).sort((function(e,t){return i.get(e)||0<(i.get(t)||0)?1:-1})),tags:e.tags,domain:ne(s.url),updatedAt:e.updatedAt,url:s.url,kind:"url"})}var l=!!e.content;if(l){var d=e;n.push({id:d.id,content:d.content,preProcessedTags:["@note"],tags:e.tags,updatedAt:e.updatedAt,kind:"note"})}e.tags=e.tags.sort((function(e,t){return(i.get(e)||0)<(i.get(t)||0)?1:-1}))})),t.filter((function(t){return t.url&&!e.some((function(e){return e.url===t.url}))})).forEach((function(e){var t=ie(e.url).map((function(e){return re(e)})).sort((function(e,t){return i.get(e)||0<(i.get(t)||0)?1:-1})),a=["@openTab","@newTab"];a.push.apply(a,t),n.push({favIconUrl:e.favIconUrl,title:e.title,preProcessedTags:a,tags:[],domain:ne(e.url),updatedAt:0,url:e.url,kind:"url"})})),n}function re(e){return"@"+e}function oe(e,t){return t.some((function(t){return t.url===e}))?"openTab":null}function le(e){var t=new Map;return e.forEach((function(e){t.set(e,(t.get(e)||0)+1)})),t}var de=(0,te.MT)({state:function(){return{storage:{kind:"local",accessKey:"",gistID:""},frames:[],clipboard:null,head:{input:""},frameContainer:{currentSelectedFrameIdx:-1},tabs:[]}},getters:{storage:function(e){return e.storage},activeTab:function(e){var t=e.tabs.find((function(e){return e.active}));return t&&t.url?t:null},allTabs:function(e){return e.tabs},frames:function(e){return se(e.frames,e.tabs)}},mutations:{SET_STORAGE:function(e,t){localStorage.setItem("storage",JSON.stringify(t)),e.storage=t},SET_DATA:function(e,t){e.frames=t.frames,e.storage=t.storage},SET_CLIPBOARD:function(e,t){e.clipboard=t},SET_FRAMES:function(e,t){e.frames=t,localStorage.setItem("frames",JSON.stringify(t))},SET_FRAME:function(e,t){t.updatedAt=Date.now();var n=e.frames.findIndex((function(e){return e.url===t.url}));~n?e.frames[n]=t:e.frames.push(t),localStorage.setItem("frames",JSON.stringify(e.frames))},SET_ALL_TABS:function(e,t){e.tabs=t},SET_NOTE:function(e,t){t.updatedAt=Date.now(),e.frames.push(t),localStorage.setItem("frames",JSON.stringify(e.frames))},UPDATE_NOTE:function(e,t){var n=e.frames.findIndex((function(e){return e.id===t.id}));~n&&(e.frames[n]=t),localStorage.setItem("frames",JSON.stringify(e.frames))},REMOVE_NOTE:function(e,t){var n=e.frames.findIndex((function(e){return e.id===t.id}));~n&&e.frames.splice(n,1),localStorage.setItem("frames",JSON.stringify(e.frames))}},actions:{setClipboard:function(e,t){e.state.clipboard!==t&&e.commit("SET_CLIPBOARD",t)},setAllTabs:function(e,t){e.commit("SET_ALL_TABS",t)},upsertFrame:function(e,t){e.commit("SET_FRAME",t)},insertNote:function(e,t){e.commit("SET_NOTE",t)},updateNote:function(e,t){e.commit("UPDATE_NOTE",t)},removeNote:function(e,t){e.commit("REMOVE_NOTE",t)},setFrames:function(e,t){e.commit("SET_FRAMES",t)},loadState:function(e){var t=[],n=localStorage.getItem("frames");n&&(t=JSON.parse(n));var a={kind:"local"},i=localStorage.getItem("storage");i&&(a=JSON.parse(i)),e.commit("SET_DATA",{frames:t,storage:a})},setStorage:function(e,t){e.commit("SET_STORAGE",t)}},modules:{}});const ce={class:"tags"},ue=["onClick"],ge=["onClick"];function me(e,t,n,a,s,r){return(0,i.wg)(),(0,i.iD)("ul",ce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.fixedTags,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("a",{class:"tag fixed",onClick:t=>r.clickedTag(e)},(0,u.zw)(e),9,ue)])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tags,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("a",{class:"tag",onClick:t=>r.clickedTag(e)},(0,u.zw)(e),9,ge)])))),128))])}var he={name:"TagViewContainer",props:["tags","fixedTags"],methods:{clickedTag(e){this.$emit("clickedTag",e)}}};const fe=(0,p.Z)(he,[["render",me],["__scopeId","data-v-75bacfbc"]]);var pe=fe,ve=(0,i.aZ)({name:"FrameViewContainer",components:{TagViewContainer:pe},emits:["toEditMode","goToPage","selectTag"],props:["frame"],computed:{isNewFrame:function(){return this.frame.preProcessedTags.some((function(e){return"@newTab"===e}))},isOpened:function(){var e=this,t=de.getters.allTabs;return t.some((function(t){return t.url===e.frame.url}))},tab:function(){var e=this,t=de.getters.allTabs;return t.find((function(t){return t.url===e.frame.url}))},isSelected:function(){var e=de.getters.activeTab;return!!e&&e.url===this.frame.url}},methods:{goToPage:function(){this.tab?this.port.postMessage({kind:"open-request-existing-tab",tab:this.tab.id}):this.port.postMessage({kind:"open-request-new-tab",url:this.frame.url})},clickedTag:function(e){this.$emit("selectTag",e)},toEditMode:function(){this.$emit("toEditMode")},addNewTab:function(){var e={url:this.tab.url,title:this.tab.title,tags:[],favIconUrl:this.tab.favIconUrl,updatedAt:Date.now()};de.dispatch("upsertFrame",e)}}});const we=(0,p.Z)(ve,[["render",ee],["__scopeId","data-v-46c20e60"]]);var Te=we;const be={class:"frame-info-container"},ye={key:0,class:"frame-info"},_e={class:"frame-header"},ke={class:"frame-header-left"},De=["src"],Ce={class:"frame-header-right"},Se={class:"tags"};function Ae(e,t,n,s,r,o){const l=(0,i.up)("font-awesome-icon"),d=(0,i.up)("TagEditorContainer");return(0,i.wg)(),(0,i.iD)("div",be,[r.newFrame?((0,i.wg)(),(0,i.iD)("div",ye,[(0,i._)("div",_e,[(0,i._)("div",ke,[(0,i._)("img",{src:r.newFrame.favIconUrl,width:"16"},null,8,De),(0,i._)("small",null,(0,u.zw)(o.getDomainFromUrl(r.newFrame.url)),1)]),(0,i._)("div",Ce,[(0,i._)("div",{class:"frame-header-view",onClick:t[0]||(t[0]=e=>o.toViewMode())},[(0,i.Wm)(l,{icon:"eye"})]),(0,i._)("div",{class:"frame-header-apply",onClick:t[1]||(t[1]=e=>o.applyChanges())},[(0,i.Wm)(l,{icon:"floppy-disk"})]),(0,i._)("div",{class:"frame-header-remove",onClick:t[2]||(t[2]=e=>o.removeFrame())},[(0,i.Wm)(l,{icon:"trash"})])])]),(0,i._)("h1",{class:"frame-title",onClick:t[3]||(t[3]=e=>o.goToPage())},(0,u.zw)(r.newFrame.title),1),(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.newFrame.comment=e),placeholder:"add comments here"},null,512),[[a.nr,r.newFrame.comment]]),(0,i._)("div",Se,[(0,i.Wm)(d,{onAddTag:o.addTag,onRemoveTag:o.removeTag,"current-tags":r.newFrame.tags,frames:n.frames},null,8,["onAddTag","onRemoveTag","current-tags","frames"])])])):(0,i.kq)("",!0)])}const Ie={class:"header"},Me={class:"tag-input-container"},xe={class:"tag-input-left"},Ee=["onClick"];function Fe(e,t,n,s,r,o){const l=(0,i.up)("TagListContainer");return(0,i.wg)(),(0,i.iD)("div",Ie,[(0,i._)("div",Me,[(0,i._)("div",xe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.allSelectedTags,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{class:"tag-input",key:t},[(0,i._)("span",{onClick:t=>o.removeTag(e)},(0,u.zw)(e),9,Ee)])))),128)),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchInput=e),onKeydown:t[1]||(t[1]=(...e)=>o.keydown&&o.keydown(...e)),ref:"input"},null,544),[[a.nr,r.searchInput]])])]),(0,i.Wm)(l,{"initial-show":5,onAddTag:o.addTag,tags:this.setTags,class:"tag-list-container"},null,8,["onAddTag","tags"])])}var Oe={name:"TagEditorContainer",emits:["addTag","removeTag"],components:{TagListContainer:M},props:["currentTags","frames"],data(){return{searchInput:"",selectedTags:[],removedTags:[]}},watch:{selectedTags:{handler(){this.searchInput=""},deep:!0}},computed:{allSelectedTags(){const e=new Set(this.removedTags);return this.currentTags?this.currentTags.filter((t=>!e.has(t))).concat(this.selectedTags):this.selectedTags},setTags(){return O(this.frames,this.selectedTags,this.searchInput)}},methods:{addHashTag(e){return e.startsWith("#")?e:"#"+e},addTag(e){this.$emit("addTag",e.name),this.searchInput=""},keydown(e){"Enter"===e.code&&this.searchInput.length>1&&(this.$emit("addTag",this.addHashTag(this.searchInput)),this.searchInput="",e.preventDefault())},removeTag(e){this.$emit("removeTag",e)}}};const Ne=(0,p.Z)(Oe,[["render",Fe],["__scopeId","data-v-73a013f8"]]);var Le=Ne,Pe={name:"FrameEditorContainer",components:{TagEditorContainer:Le},emits:["toEditMode","goToPage","toViewMode","applyChanges","removeFrame"],props:["frame","frames"],data(){return{newFrame:null}},methods:{getDomainFromUrl(e){return ie(e).join(" >> ")},goToPage(){this.$emit("goToPage")},addTag(e){this.newFrame.tags.push(e)},removeTag(e){this.newFrame.tags=this.newFrame.tags.filter((t=>t!==e))},clickedTag(e){this.emitter.emit("frame-add-tag-to-selection",{id:this.id,tag:e})},toViewMode(){this.$emit("toViewMode")},removeFrame(){this.newFrame.operation="remove",this.$emit("removeFrame",this.newFrame),this.$emit("toViewMode")},applyChanges(){this.$emit("applyChanges",this.newFrame)}},mounted(){this.newFrame=JSON.parse(JSON.stringify(this.frame))}};const $e=(0,p.Z)(Pe,[["render",Ae],["__scopeId","data-v-1335c202"]]);var Ve=$e;const We={class:"frame-header-right"},je={class:"view"},Re={class:"tags"};function qe(e,t,n,a,s,r){const o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagViewContainer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",We,[(0,i._)("div",{class:"frame-header-edit",onClick:t[0]||(t[0]=e=>r.toEditMode()),title:"edit frame"},[(0,i.Wm)(o,{icon:"edit"})])]),(0,i._)("div",je,(0,u.zw)(n.note.content),1),(0,i._)("div",Re,[(0,i.Wm)(l,{tags:n.note.tags,"fixed-tags":n.note.preProcessedTags,onClickedTag:r.clickedTag},null,8,["tags","fixed-tags","onClickedTag"])])],64)}var ze={name:"NoteViewContainer",components:{TagViewContainer:pe},emits:["toEditMode","selectTag"],props:["note"],methods:{toEditMode(){this.$emit("toEditMode")},clickedTag(e){this.$emit("selectTag",e)}}};const Je=(0,p.Z)(ze,[["render",qe],["__scopeId","data-v-06a7a1d0"]]);var Ze=Je,Ue={class:"frame-header-right"},Ye={class:"tags"};function He(e,t,n,a,s,r){var o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagEditorContainer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ue,[(0,i._)("div",{class:"frame-header-view",onClick:t[0]||(t[0]=function(t){return e.toViewMode()})},[(0,i.Wm)(o,{icon:"eye"})]),(0,i._)("div",{class:(0,u.C_)(["frame-header-apply",{disabled:!e.hasChanges}]),onClick:t[1]||(t[1]=function(t){return e.applyChanges()})},[(0,i.Wm)(o,{icon:"floppy-disk"})],2),(0,i._)("div",{class:"frame-header-remove",onClick:t[2]||(t[2]=function(t){return e.removeNote()})},[(0,i.Wm)(o,{icon:"trash"})])]),(0,i._)("div",{contenteditable:"true",class:"text-area","aria-placeholder":"note here",onFocus:t[3]||(t[3]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.focus&&e.focus.apply(e,t)}),ref:"textArea",onInput:t[4]||(t[4]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.onInput&&e.onInput.apply(e,t)})},null,544),(0,i._)("div",Ye,[(0,i.Wm)(l,{currentTags:e.noteCopy.tags,frames:e.frames,onRemoveTag:e.removeTag,onAddTag:e.addTag},null,8,["currentTags","frames","onRemoveTag","onAddTag"])])],64)}var Ke=(0,i.aZ)({name:"NoteEditContainer",components:{TagEditorContainer:Le},emits:["toViewMode"],props:{frames:{type:Object,required:!0},note:{type:Object,required:!0}},data:function(){return{hasChanges:!1,noteCopy:{}}},watch:{},methods:{toViewMode:function(){this.$emit("toViewMode")},removeNote:function(){de.dispatch("removeNote",this.note),this.$emit("toViewMode")},applyChanges:function(){var e={id:this.noteCopy.id,content:this.noteCopy.content,tags:this.noteCopy.tags,updatedAt:Date.now()};de.dispatch("updateNote",e),this.$emit("toViewMode")},onInput:function(){this.hasChanges=!0;var e=this.$refs.textArea;this.noteCopy.content=e.innerText},removeTag:function(e){this.hasChanges=!0,this.noteCopy.tags=this.noteCopy.tags.filter((function(t){return t!==e}))},addTag:function(e){this.noteCopy.tags.includes(e)||(this.hasChanges=!0,this.noteCopy.tags.push(e))}},created:function(){this.noteCopy=JSON.parse(JSON.stringify(this.note))},mounted:function(){var e=this.$refs.textArea;e.innerText=this.note.content}});const Be=(0,p.Z)(Ke,[["render",He],["__scopeId","data-v-6085c89e"]]);var Ge=Be,Xe={name:"FramesContainer",components:{NoteEditContainer:Ge,NoteViewContainer:Ze,FrameEditorContainer:Ve,FrameViewContainer:Te},emits:["selectTag"],props:["selectedTags"],data(){return{editModeIndex:-1,limit:10}},computed:{totalRemain(){return this.framesFiltered.length-this.limit},frames(){return de.getters.frames},framesFilteredWithLimit(){return x(this.frames,this.selectedTags).splice(0,this.limit)},framesFiltered(){return x(this.frames,this.selectedTags)}},watch:{selectedTags(){this.limit=10}},methods:{showAll(){this.limit=this.framesFiltered.length},selectTag(e){this.$emit("selectTag",e)},toEditMode(e){this.editModeIndex=e},toViewMode(){this.editModeIndex=-1},applyChanges(e){de.dispatch("upsertFrame",e),this.editModeIndex=-1},removeFrame(e){de.dispatch("upsertFrame",e),this.editModeIndex=-1}},mounted(){}};const Qe=(0,p.Z)(Xe,[["render",U],["__scopeId","data-v-9c9070e2"]]);var et=Qe,tt={class:"frame-header-right"},nt={class:"tags"};function at(e,t,n,a,s,r){var o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagViewContainer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",tt,[e.hasChanges?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"frame-header-apply",onClick:t[0]||(t[0]=function(t){return e.applyChanges()})},[(0,i.Wm)(o,{icon:"floppy-disk"})])):(0,i.kq)("",!0),(0,i._)("div",{class:"frame-header-remove",onClick:t[1]||(t[1]=function(t){return e.removeFrame()})},[(0,i.Wm)(o,{icon:"trash"})])]),(0,i._)("div",{contenteditable:"true",class:"text-area","aria-placeholder":"note here",onFocus:t[2]||(t[2]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.focus&&e.focus.apply(e,t)}),ref:"textArea",onInput:t[3]||(t[3]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.onInput&&e.onInput.apply(e,t)})},"add text here...",544),(0,i._)("div",nt,[(0,i.Wm)(l,{tags:e.tags},null,8,["tags"])])],64)}var it=(0,i.aZ)({name:"NewNoteContainer",components:{TagViewContainer:pe},props:["tags"],data:function(){return{hasChanges:!1}},methods:{onInput:function(){this.hasChanges=!0},focus:function(){var e=this.$refs.textArea;"add text here..."===e.innerText&&(e.innerText="")},applyChanges:function(){var e=this.$refs.textArea,t={id:Math.floor(1e9*Math.random()).toFixed(0),content:e.innerText,tags:this.tags,updatedAt:Date.now()};de.dispatch("insertNote",t),this.hasChanges=!1,e.innerText="add text here..."},removeFrame:function(){var e=this.$refs.textArea;this.hasChanges=!1,e.innerText="add text here..."}}});const st=(0,p.Z)(it,[["render",at],["__scopeId","data-v-cb6f8b32"]]);var rt=st,ot={name:"TabFrameSearch",components:{NewNoteContainer:rt,FramesContainer:et,SearchContainer:$,TabContainer:w},data(){return{tagToAdd:null,selectedTags:[],clipboard:null}},computed:{},methods:{getClipboard(){navigator.clipboard.readText().then((e=>{this.clipboard=e}))},selectTag(e){this.tagToAdd=e},addLink(){console.log(this.clipboard)},setSelectedTags(e){this.selectedTags=e}}};const lt=(0,p.Z)(ot,[["render",c]]);var dt=lt;function ct(e,t,n,a,s,r){const o=(0,i.up)("SetStorageContainer"),l=(0,i.up)("TabContainer"),d=(0,i.up)("GistPushData"),c=(0,i.up)("GistPullData");return(0,i.wg)(),(0,i.j4)(l,{title:"sync options",subtitle:r.subtitle},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{title:"set storage",padding:"5px","padding-left":"10px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(o)])),_:1}),"gist"===r.storage.kind?((0,i.wg)(),(0,i.j4)(l,{key:0,title:"gist push data","default-activation":!0,padding:"5px","padding-left":"10px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(d)])),_:1})):(0,i.kq)("",!0),"gist"===r.storage.kind?((0,i.wg)(),(0,i.j4)(l,{key:1,title:"gist pull data","default-activation":!1,padding:"5px","padding-left":"10px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})):(0,i.kq)("",!0)])),_:1},8,["subtitle"])}var ut=n(3642);function gt(e,t,n){var a=JSON.parse(JSON.stringify(t)),i=[],s=new Array,r=[],o=!1;return e.forEach((function(e){var r=!!e.url,l=!!e.content,d=t.findIndex((function(t){return r?t.url===e.url:t.id===e.id}));~d?(e.updatedAt>t[d].updatedAt||n&&e.updatedAt<t[d].updatedAt)&&(o=!0,r&&s.push(mt(e,a[d])),l&&s.push(ht(e,a[d])),a[d]=e):(o=!0,i.push(e),a.push(e))})),a=a.filter((function(t){var n=!!t.url,a=e.findIndex((function(e){return n?e.url===t.url:e.id===t.id}));return-1!==a||(o=!0,r.push(t),!1)})),{hasChanges:o,frames:a,itemsRemoved:r,itemsAdded:i,itemsModified:s}}function mt(e,t){var n=null,a=null;e.comment!==t.comment&&(a=t.comment?t.comment:"",n=e.comment?e.comment:"");var i=null,s=null;e.title!==t.title&&(i=e.title?e.title:null,s=t.title?t.title:null);var r=e.tags?e.tags.filter((function(e){return!(t.tags&&t.tags.includes(e))})):[],o=t.tags?t.tags.filter((function(t){return!(e.tags&&e.tags.includes(t))})):[];return{url:e.url,newComment:n,oldComment:a,newTitle:i,oldTitle:s,tagsToAdd:r,tagsToRemove:o}}function ht(e,t){var n=null,a=null;e.content!==t.content&&(a=t.content?t.content:"",n=e.content?e.content:"");var i=e.tags?e.tags.filter((function(e){return!(t.tags&&t.tags.includes(e))})):[],s=t.tags?t.tags.filter((function(t){return!(e.tags&&e.tags.includes(t))})):[];return{oldContent:a,newContent:n,tagsToAdd:i,tagsToRemove:s}}var ft=n(7063);const pt={class:"form"},vt={key:0,class:"lm-form_line"},wt={class:"lm-columns"},Tt={class:"lm-column"},bt=(0,i._)("label",null,"default storage name:",-1),yt=(0,i._)("br",null,null,-1),_t=["disabled"],kt={class:"lm-form_line"},Dt={class:"lm-columns"},Ct={class:"lm-column"},St=(0,i._)("label",null,"Storage kind:",-1),At=["disabled"],It=(0,i._)("option",null,"local",-1),Mt=(0,i._)("option",null,"gist",-1),xt=[It,Mt],Et={key:1,class:"lm-form_line"},Ft={class:"lm-columns"},Ot={class:"lm-column"},Nt=(0,i._)("label",null,"gist access key:",-1),Lt=(0,i._)("br",null,null,-1),Pt=["disabled"],$t={class:"lm-column"},Vt=(0,i._)("label",null,"gist ID:",-1),Wt=(0,i._)("br",null,null,-1),jt=["disabled"],Rt={class:"bottom-button-container"};function qt(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)("div",pt,["gist"===o.storage.kind?((0,i.wg)(),(0,i.iD)("div",vt,[(0,i._)("div",wt,[(0,i._)("div",Tt,[bt,yt,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.storage.name=e),disabled:!r.editMode},null,8,_t),[[a.nr,o.storage.name]])])])])):(0,i.kq)("",!0),(0,i._)("div",kt,[(0,i._)("div",Dt,[(0,i._)("div",Ct,[St,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.storage.kind=e),disabled:!r.editMode},xt,8,At),[[a.bM,o.storage.kind]])])])]),"gist"===o.storage.kind?((0,i.wg)(),(0,i.iD)("div",Et,[(0,i._)("div",Ft,[(0,i._)("div",Ot,[Nt,Lt,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.storage.accessKey=e),disabled:!r.editMode},null,8,Pt),[[a.nr,o.storage.accessKey]])]),(0,i._)("div",$t,[Vt,Wt,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.storage.gistID=e),disabled:!r.editMode},null,8,jt),[[a.nr,o.storage.gistID]])])])])):(0,i.kq)("",!0),(0,i._)("div",Rt,[r.editMode?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"grey",onClick:t[4]||(t[4]=e=>r.editMode=!0)},"edit")),r.editMode?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"yellow",onClick:t[5]||(t[5]=e=>o.setStorage())},"save")):(0,i.kq)("",!0)])])}var zt={name:"SetStorageContainer",data(){return{octokit:null,editMode:!1}},computed:{storage(){return de.getters.storage}},methods:{setStorage(){this.editMode=!1,de.dispatch("setStorage",this.storage)}}};const Jt=(0,p.Z)(zt,[["render",qt]]);var Zt=Jt;const Ut=e=>((0,i.dD)("data-v-038e8746"),e=e(),(0,i.Cn)(),e),Yt={class:"container"},Ht={key:0,class:"overview"},Kt={class:"overview-item add"},Bt={class:"overview-item remove"},Gt={class:"overview-item change"},Xt={key:1,class:"overview"},Qt=Ut((()=>(0,i._)("div",{class:"overview-item add"},"add: - ",-1))),en=Ut((()=>(0,i._)("div",{class:"overview-item remove"},"remove: - ",-1))),tn=Ut((()=>(0,i._)("div",{class:"overview-item change"},"modify: - ",-1))),nn=[Qt,en,tn],an={class:"bottom-button-container"},sn=["disabled"],rn={key:1,class:"error"};function on(e,t,n,a,s,r){const o=(0,i.up)("LoadingContainer");return(0,i.wg)(),(0,i.iD)("div",Yt,[s.isLoading?((0,i.wg)(),(0,i.j4)(o,{key:0})):(0,i.kq)("",!0),(0,i._)("div",null,[s.mergedData?((0,i.wg)(),(0,i.iD)("div",Ht,[(0,i._)("div",Kt,"add: "+(0,u.zw)(s.mergedData.itemsAdded.length),1),(0,i._)("div",Bt,"remove: "+(0,u.zw)(s.mergedData.itemsRemoved.length),1),(0,i._)("div",Gt,"modify: "+(0,u.zw)(s.mergedData.itemsModified.length),1)])):(0,i.kq)("",!0),s.mergedData?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Xt,nn))]),(0,i._)("div",an,[(0,i._)("button",{class:"yellow",onClick:t[0]||(t[0]=(...e)=>r.fetchData&&r.fetchData(...e))},"fetch data"),(0,i._)("button",{class:"blue",onClick:t[1]||(t[1]=(...e)=>r.pushData&&r.pushData(...e)),disabled:!(s.mergedData&&s.mergedData.hasChanges)},"push",8,sn)]),s.error?((0,i.wg)(),(0,i.iD)("small",rn,"Error: "+(0,u.zw)(s.error),1)):(0,i.kq)("",!0)])}const ln=e=>((0,i.dD)("data-v-1369f520"),e=e(),(0,i.Cn)(),e),dn={class:"loading-container"},cn=ln((()=>(0,i._)("div",{class:"ring-container"},[(0,i._)("div",{class:"lds-dual-ring"})],-1))),un=[cn];function gn(e,t,n,a,s,r){return(0,i.wg)(),(0,i.iD)("div",dn,un)}var mn={name:"LoadingContainer"};const hn=(0,p.Z)(mn,[["render",gn],["__scopeId","data-v-1369f520"]]);var fn=hn,pn={name:"GistPushData",components:{LoadingContainer:fn},data(){return{error:null,mergedData:null,isLoading:!1}},methods:{fetchData(){this.error=null,this.isLoading=!0;const e=de.getters.storage,t=new ut.vd({auth:e.accessKey});t.rest.users.getAuthenticated().then((()=>{t.rest.gists.get({gist_id:e.gistID}).then((t=>{const n=`${e.name}_frames.json`,a=t.data.files[n];if(a){const e=JSON.parse(a.content),t=(0,ft.Lj)(e);this.mergedData=gt(de.getters.frames,t)}else this.mergedData=gt(de.getters.frames,[])})).finally((()=>this.isLoading=!1))})).catch((e=>{this.isLoading=!1,this.error=e.message}))},pushData(){this.error=null,this.isLoading=!0;const e={},t=de.getters.storage;e[t.name+"_frames.json"]={content:JSON.stringify((0,ft.nN)(this.mergedData.frames))};const n=new ut.vd({auth:t.accessKey});n.rest.users.getAuthenticated().then((()=>{n.rest.gists.update({gist_id:t.gistID,files:e}).then((()=>{this.mergedData=null})).catch((e=>{this.error=e.message})).finally((()=>{this.isLoading=!1}))})).catch((e=>{this.isLoading=!1,this.error=e.message}))}}};const vn=(0,p.Z)(pn,[["render",on],["__scopeId","data-v-038e8746"]]);var wn=vn;const Tn=e=>((0,i.dD)("data-v-4e8ba957"),e=e(),(0,i.Cn)(),e),bn={class:"container"},yn={key:0,class:"overview"},_n={class:"overview-item add"},kn={class:"overview-item remove"},Dn={class:"overview-item change"},Cn={key:1,class:"overview"},Sn=Tn((()=>(0,i._)("div",{class:"overview-item add"},"add: - ",-1))),An=Tn((()=>(0,i._)("div",{class:"overview-item remove"},"remove: - ",-1))),In=Tn((()=>(0,i._)("div",{class:"overview-item change"},"modify: - ",-1))),Mn=[Sn,An,In],xn={class:"bottom-button-container"},En=["disabled"],Fn={key:1,class:"error"};function On(e,t,n,a,s,r){const o=(0,i.up)("LoadingContainer");return(0,i.wg)(),(0,i.iD)("div",bn,[s.isLoading?((0,i.wg)(),(0,i.j4)(o,{key:0})):(0,i.kq)("",!0),(0,i._)("div",null,[s.mergedData?((0,i.wg)(),(0,i.iD)("div",yn,[(0,i._)("div",_n,"add: "+(0,u.zw)(s.mergedData.itemsAdded.length),1),(0,i._)("div",kn,"remove: "+(0,u.zw)(s.mergedData.itemsRemoved.length),1),(0,i._)("div",Dn,"modify: "+(0,u.zw)(s.mergedData.itemsModified.length),1)])):(0,i.kq)("",!0),s.mergedData?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Cn,Mn))]),(0,i._)("div",xn,[(0,i._)("button",{class:"yellow",onClick:t[0]||(t[0]=(...e)=>r.fetchData&&r.fetchData(...e))},"fetch data"),(0,i._)("button",{class:"blue",onClick:t[1]||(t[1]=(...e)=>r.pullData&&r.pullData(...e)),disabled:!(s.mergedData&&s.mergedData.hasChanges)},"pull",8,En)]),s.error?((0,i.wg)(),(0,i.iD)("small",Fn,"Error: "+(0,u.zw)(s.error),1)):(0,i.kq)("",!0)])}var Nn={name:"GistPullData",components:{LoadingContainer:fn},data(){return{error:null,mergedData:null,isLoading:!1}},methods:{fetchData(){this.error=null,this.isLoading=!0;const e=de.getters.storage,t=new ut.vd({auth:e.accessKey});t.rest.users.getAuthenticated().then((()=>{t.rest.gists.get({gist_id:e.gistID}).then((t=>{const n=`${e.name}_frames.json`,a=t.data.files[n];if(a){const e=JSON.parse(a.content),t=(0,ft.Lj)(e);this.mergedData=gt(t,de.getters.frames,!0)}else this.error="cannot find previews data"})).finally((()=>this.isLoading=!1))})).catch((e=>{this.isLoading=!1,this.error=e.message}))},pullData(){de.dispatch("setFrames",this.mergedData.frames),this.error=null,this.mergedData=null}}};const Ln=(0,p.Z)(Nn,[["render",On],["__scopeId","data-v-4e8ba957"]]);var Pn=Ln,$n={name:"TabSyncOptions",components:{GistPullData:Pn,GistPushData:wn,SetStorageContainer:Zt,TabContainer:w},data(){return{remoteDetail:{status:"none",mergeToRemoteDetail:{},mergeToLocalDetail:{},hasFile:!1,data:null},octokit:null,editMode:!1,log:"need fetch data"}},computed:{storage(){return de.getters.storage},subtitle(){return"kind "+this.storage.kind},canSync(){if(this.remoteDetail.mergeToRemoteDetail){const e=this.remoteDetail.mergeToRemoteDetail;if(e.itemsAdded>0||e.itemsRemoved>0||e.itemsModified>0)return!0}return!1}},methods:{setStorage(){this.editMode=!1,de.dispatch("setStorage",this.storage)},async authGist(){const e=new ut.vd({auth:this.storage.accessKey});e.rest.users.getAuthenticated().then((()=>{this.octokit=e})).catch((e=>{this.log="error: "+e.message}))},fetch(){this.octokit.rest.gists.get({gist_id:this.storage.gistID}).then((e=>{const t=e.data,n=`${this.storage.name}_frames.json`,a=t.files[n];if(this.remoteDetail.status="fetched",a){this.remoteDetail.hasFile=!0;const e=JSON.parse(a.content),t=(0,ft.Lj)(e);this.remoteDetail.remoteFrames=t,this.remoteDetail.mergeToRemoteDetail=gt(de.getters.frames,t),this.remoteDetail.mergeToLocalDetail=gt(t,de.getters.frames);const n=this.remoteDetail.mergeToRemoteDetail,i=this.remoteDetail.mergeToLocalDetail;this.log=`push: add: ${n.itemsAdded.length} / remove: ${n.itemsRemoved.length} / change: ${n.itemsModified.length}`,this.log+=` || pull: add: ${i.itemsAdded.length} / remove: ${i.itemsRemoved.length} / change: ${i.itemsModified.length}`}else this.remoteDetail.mergeToRemoteDetail=gt(de.getters.frames,[]),this.remoteDetail.mergeToLocalDetail=gt([],de.getters.frames),this.log=`cannot find [${n}], it will create during push process`})).catch((e=>{this.log="error: "+e.message}))},push(){const e={};e[this.storage.name+"_frames.json"]={content:JSON.stringify((0,ft.nN)(this.remoteDetail.mergeToRemoteDetail.frames))},this.octokit.rest.gists.update({gist_id:this.storage.gistID,files:e}).then((e=>{console.log(e),this.fetchData=null})).catch((e=>{this.log="error: "+e.message}))},pull(){de.dispatch("setFrames",this.remoteDetail.remoteFrames),this.remoteDetail={status:"none"},this.log="pull completed"}},mounted(){}};const Vn=(0,p.Z)($n,[["render",ct]]);var Wn=Vn,jn={name:"RadarView",components:{TabSyncOptions:Wn,TabFrameSearch:dt},data(){return{hasPlugin:!1}},methods:{},created(){},mounted(){this.port&&(this.hasPlugin=!0,this.port.postMessage({kind:"all-tabs-request"}),de.dispatch("loadState"))}};const Rn=(0,p.Z)(jn,[["render",d],["__scopeId","data-v-9da08efc"]]);var qn=Rn,zn={components:{RadarView:qn}};const Jn=(0,p.Z)(zn,[["render",s]]);var Zn=Jn,Un=n(1373),Yn=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function r(e){try{l(a.next(e))}catch(t){s(t)}}function o(e){try{l(a["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):i(e.value).then(r,o)}l((a=a.apply(e,t||[])).next())}))},Hn=function(e,t){var n,a,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,a&&(i=2&s[0]?a["return"]:s[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(o){s=[6,o],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Kn=function(){function e(){}return Object.defineProperty(e.prototype,"login",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Yn(this,void 0,void 0,(function(){var t;return Hn(this,(function(n){return t=new ut.vd({auth:e}),console.log(t),t.rest.users.getAuthenticated().then((function(e){return console.log("success"),e})).catch((function(e){return console.log("error: ",e),!1})),[2]}))}))}}),e}(),Bn=function(){function e(e,t){Object.defineProperty(this,"emitter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"port",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.emitter=t,this.id=e}return Object.defineProperty(e.prototype,"connect",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.port=chrome.runtime.connect(this.id,{name:"dashboard"}),this.port.onMessage.addListener((function(t){"load-response"===t.kind&&e.emitter.emit("load-response",t),"all-tabs-response"===t.kind&&(console.log("all-tabs-response:: ",t.data),de.dispatch("setAllTabs",t.data))})),this.port.onDisconnect.addListener((function(){setTimeout((function(){e.connect()}),100),console.log("port.onDisconnect")}))}}),Object.defineProperty(e.prototype,"postMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.port.postMessage(e)}}),e}(),Gn=n(3494),Xn=n(8539),Qn=n(7749);Gn.vI.add(Xn.Mdf,Xn.Xcf,Xn.EdJ,Xn.$aW,Xn.bgy,Xn.wlW,Xn.g6h);var ea=(0,Un.Z)(),ta=(0,a.ri)(Zn);try{var na=new Bn("aekckpbdaninhmbbajcpedhaidaeofdh",ea);na.connect(),ta.config.globalProperties.port=na}catch(aa){console.log("error!")}ta.config.globalProperties.emitter=ea,ta.config.globalProperties.github=new Kn,setInterval((function(){navigator.clipboard.readText().then((function(e){de.dispatch("setClipboard",e)})).catch((function(){}))}),500),ta.use(de).component("font-awesome-icon",Qn.GN).mount("#app")},5696:function(){}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,s){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],s=e[c][2];for(var o=!0,l=0;l<a.length;l++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(o=!1,s<r&&(r=s));if(o){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,i,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,s,r=a[0],o=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)var c=l(n)}for(t&&t(a);d<r.length;d++)s=r[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunklomni"]=self["webpackChunklomni"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(2929)}));a=n.O(a)})();
//# sourceMappingURL=app.0571c6b0.js.map