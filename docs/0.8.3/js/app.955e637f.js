(function(){var e={7065:function(e,t,a){"use strict";var n=a(9242),i=a(3396);function s(e,t,a,n,s,r){const o=(0,i.up)("RadarView");return(0,i.wg)(),(0,i.j4)(o)}const r={id:"radar"},o={key:0},l={key:1};function d(e,t,a,n,s,d){const c=(0,i.up)("TabFrameSearch"),u=(0,i.up)("TabSyncOptions");return(0,i.wg)(),(0,i.iD)("div",r,[s.hasPlugin?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(c),(0,i.Wm)(u)])):(0,i.kq)("",!0),s.hasPlugin?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",l," need to install plugin "))])}function c(e,t,a,n,s,r){const o=(0,i.up)("SearchContainer"),l=(0,i.up)("TabContainer"),d=(0,i.up)("FramesContainer"),c=(0,i.up)("FrameToAddContainer"),u=(0,i.up)("NewNoteContainer");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{title:"search tab",subtitle:s.selectedTags.length>0?s.selectedTags:""},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{title:"searcher","default-activation":"true",padding:"5px","padding-left":"15px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{onSelectedTags:r.setSelectedTags,addTagToSelection:s.tagToAdd},null,8,["onSelectedTags","addTagToSelection"])])),_:1}),(0,i.Wm)(l,{title:"frames","default-activation":"true",padding:"5px","padding-left":"15px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{"selected-tags":s.selectedTags,onSelectTag:r.selectTag},null,8,["selected-tags","onSelectTag"]),(0,i.Wm)(c,{tags:s.selectedTags},null,8,["tags"])])),_:1}),(0,i.Wm)(l,{title:"new note",padding:"5px","padding-left":"15px",disabled:0===s.selectedTags.length,"is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{tags:s.selectedTags},null,8,["tags"])])),_:1},8,["disabled"])])),_:1},8,["subtitle"])])}var u=a(7139);const g={id:"tab",ref:"tab",class:"tab"},m={type:"checkbox",ref:"chck1"};function h(e,t,a,s,r,o){return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("input",m,null,512),(0,i._)("label",{class:(0,u.C_)(["tab-label",{"label-open":o.isActive,disabled:o.isDisabled,inner:a.isInner}]),style:(0,u.j5)({"padding-left":a.paddingLeft}),onClick:t[0]||(t[0]=(...e)=>o.openTab&&o.openTab(...e)),draggable:"true"},(0,u.zw)(a.title)+(0,u.zw)(a.subtitle?" - "+a.subtitle:""),7),(0,i.wy)((0,i._)("div",{class:"tab-content",style:(0,u.j5)({"min-height":a.minHeight,padding:a.padding}),ref:"content"},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],4),[[n.F8,o.isActive]]),a.canResize&&o.isActive?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"resizer",ref:"resizer",onDrag:t[1]||(t[1]=(...e)=>o.dragMove&&o.dragMove(...e)),draggable:"true"},null,544)):(0,i.kq)("",!0)],512)}var f={name:"TabContainer",props:["title","canResize","defaultActivation","minHeight","padding","subtitle","disabled","paddingLeft","isInner"],data(){return{isActiveButton:null,lastOffetY:null}},watch:{disabled(){this.isActiveButton=null}},computed:{isDisabled(){return this.disabled},isActive(){return!this.isDisabled&&(null===this.isActiveButton?this.defaultActivation:this.isActiveButton)}},methods:{subtitleHere(){console.log("opaaa")},dragMove(e){if(this.lastOffetY){if(e.clientY!==this.lastOffetY&&1===e.buttons){const t=e.clientY-this.lastOffetY;this.lastOffetY=e.clientY,this.$refs.content.style.maxHeight=this.$refs.content.clientHeight+t+"px"}}else this.lastOffetY=e.clientY},openTab(){null===this.isActiveButton&&this.defaultActivation||this.isActiveButton?this.isActiveButton=!1:this.isActiveButton=!0}}},p=a(89);const v=(0,p.Z)(f,[["render",h],["__scopeId","data-v-03c1c4c6"]]);var w=v;const T={class:"header"},b={class:"tag-input-container"},_=["onClick"];function y(e,t,a,s,r,o){const l=(0,i.up)("TagListContainer");return(0,i.wg)(),(0,i.iD)("div",T,[(0,i._)("div",b,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.selectedTags,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{class:"tag-input",key:t},[(0,i._)("span",{onClick:t=>o.removeTag(e)},(0,u.zw)(e),9,_)])))),128)),(0,i.wy)((0,i._)("input",{class:(0,u.C_)({"no-tags":0===r.selectedTags.length}),"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchInput=e),onKeydown:t[1]||(t[1]=(...e)=>o.keydown&&o.keydown(...e)),ref:"input"},null,34),[[n.nr,r.searchInput]])]),(0,i.Wm)(l,{"initial-show":10,onAddTag:o.addTag,tags:this.setDomainsAndTags,class:"tag-list-container"},null,8,["onAddTag","tags"])])}a(7658);const D={class:"tags"},k=["onClick"],C={key:0};function S(e,t,a,n,s,r){return(0,i.wg)(),(0,i.iD)("ul",D,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.items,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("a",{href:"#",class:"tag",style:(0,u.j5)(r.getCount(e.count)),onClick:t=>r.selectTag(t,e)},(0,u.zw)(e.name),13,k)])))),128)),r.displayShow>0?((0,i.wg)(),(0,i.iD)("li",C,[(0,i._)("a",{href:"#",class:"tag-add",onClick:t[0]||(t[0]=(...e)=>r.showMore&&r.showMore(...e))},"+"+(0,u.zw)(r.displayShow),1)])):(0,i.kq)("",!0)])}var I={name:"TagListContainer",emits:["addTag"],props:["tags","initialShow"],data(){return{styleObject:{"--count":"'12'"},moreToShow:0}},computed:{displayShow(){return this.tags.length-this.initialShow-this.moreToShow},slice(){return this.initialShow+this.moreToShow},items(){const e=JSON.parse(JSON.stringify(this.tags));return e.splice(0,this.slice).sort(((e,t)=>e.count<t.count?1:-1))}},methods:{showMore(){this.moreToShow+=10},getCount(e){return{"--count":`'${e}'`}},selectTag(e,t){this.$emit("addTag",t),e.preventDefault()}}};const A=(0,p.Z)(I,[["render",S],["__scopeId","data-v-31bc07a2"]]);var M=A;function x(e,t){var a=JSON.parse(JSON.stringify(e)),n=t.filter((function(e){return e.startsWith("#")}));return n.length>0&&(a=a.filter((function(e){return n.every((function(t){return e.tags.includes(t)||e.preProcessedTags.includes(t)}))}))),F(a)}function F(e){return e.sort((function(e,t){return e.tags.length>t.tags.length?1:-1}))}function E(e){return e.startsWith("#")?e:"#"+e}function O(e,t,a){a=a.toLowerCase();var n=new Array;return t=t.filter((function(e){return e.startsWith("#")})),t.length>0&&(e=e.filter((function(e){return t.every((function(t){return e.tags.includes(t)||e.preProcessedTags.includes(t)}))}))),e.forEach((function(e){e.tags.forEach((function(e){if((!(a.length>1)||e.toLowerCase().includes(a))&&!t.includes(e)){var i=n.findIndex((function(t){return t.name===e}));-1===i?n.push({name:E(e),count:1,kind:"tag"}):n[i].count++}})),e.preProcessedTags.forEach((function(e){if((!(a.length>1)||e.toLowerCase().includes(a))&&!t.includes(e)){var i=n.findIndex((function(t){return t.name===e}));-1===i?n.push({name:E(e),count:1,kind:"preProcessed"}):n[i].count++}}))})),t.length>0&&(n=n.filter((function(t){return t.count<e.length}))),n.sort((function(e,t){return e.count>t.count?-1:1}))}var N={name:"SearchContainer",emits:["selectedTags"],components:{TagListContainer:M},props:["addTagToSelection"],data(){return{searchInput:"",selectedTags:[]}},watch:{addTagToSelection(e){this.selectedTags.push(e),this.$emit("selectedTags",this.selectedTags)},selectedTags:{handler(){this.searchInput=""},deep:!0}},computed:{frames(){return this.$store.getters.frames},setDomainsAndTags(){return O(this.frames,this.selectedTags,this.searchInput)}},methods:{addHashTag(e){return E(e)},addTag(e){this.selectedTags.push(e.name),this.$emit("selectedTags",this.selectedTags)},keydown(e){"Backspace"===e.code&&0===this.searchInput.length&&(this.selectedTags.pop(),this.$emit("selectedTags",this.selectedTags),e.preventDefault()),"Enter"===e.code&&this.searchInput.length>1&&(this.selectedTags.push(this.addHashTag(this.searchInput)),this.$emit("selectedTags",this.selectedTags),e.preventDefault())},removeTag(e){this.selectedTags=this.selectedTags.filter((t=>t!==e)),this.$emit("selectedTags",this.selectedTags)}},created(){}};const L=(0,p.Z)(N,[["render",y],["__scopeId","data-v-5380a5b2"]]);var $=L;const V=e=>((0,i.dD)("data-v-9c9070e2"),e=e(),(0,i.Cn)(),e),W={class:"frame-container",ref:"frames"},P={key:0},j={key:1},R=V((()=>(0,i._)("div",{class:"divider"},null,-1))),q={key:0,class:"pagination-container"},z={key:1,class:"empty-container"},U=V((()=>(0,i._)("h2",null,"It's empty",-1)));function J(e,t,a,n,s,r){const o=(0,i.up)("NoteViewContainer"),l=(0,i.up)("NoteEditContainer"),d=(0,i.up)("FrameViewContainer"),c=(0,i.up)("FrameEditorContainer");return(0,i.wg)(),(0,i.iD)("div",W,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.framesFilteredWithLimit,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"frame",key:t,ref_for:!0,ref:"frame"+t},["note"===e.kind?((0,i.wg)(),(0,i.iD)("div",P,[s.editModeIndex!==t?((0,i.wg)(),(0,i.j4)(o,{key:0,note:e,onToEditMode:e=>r.toEditMode(t),onSelectTag:r.selectTag},null,8,["note","onToEditMode","onSelectTag"])):(0,i.kq)("",!0),s.editModeIndex===t?((0,i.wg)(),(0,i.j4)(l,{key:1,frames:r.frames,note:e,onToViewMode:e=>r.toViewMode(t)},null,8,["frames","note","onToViewMode"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),"url"===e.kind?((0,i.wg)(),(0,i.iD)("div",j,[s.editModeIndex!==t?((0,i.wg)(),(0,i.j4)(d,{key:0,frame:e,onToEditMode:e=>r.toEditMode(t),onSelectTag:r.selectTag},null,8,["frame","onToEditMode","onSelectTag"])):(0,i.kq)("",!0),s.editModeIndex===t?((0,i.wg)(),(0,i.j4)(c,{key:1,frames:r.frames,frame:e,onToViewMode:e=>r.toViewMode(t),onApplyChanges:r.applyChanges,onRemoveFrame:r.removeFrame},null,8,["frames","frame","onToViewMode","onApplyChanges","onRemoveFrame"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),R])))),128)),r.totalRemain>0?((0,i.wg)(),(0,i.iD)("div",q,[(0,i._)("small",null,[(0,i._)("span",{onClick:t[0]||(t[0]=(...e)=>r.showAll&&r.showAll(...e))},"click here"),(0,i.Uk)(" to show all "+(0,u.zw)(r.framesFiltered.length)+" frames",1)])])):(0,i.kq)("",!0),0===r.framesFiltered.length?((0,i.wg)(),(0,i.iD)("div",z,[U,(0,i._)("p",null,(0,u.zw)(r.framesFiltered.length)+" filtered of "+(0,u.zw)(r.frames.length)+" frames",1)])):(0,i.kq)("",!0)],512)}const Z={class:"frame-info-container"},Y={class:"frame-info"},H={class:"frame-header"},K={class:"frame-header-left"},B=["src"],G={class:"frame-header-right"},X={class:"tags"};function Q(e,t,a,s,r,o){const l=(0,i.up)("font-awesome-icon"),d=(0,i.up)("TagViewContainer");return(0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",Y,[(0,i._)("div",H,[(0,i._)("div",K,[(0,i._)("img",{src:a.frame.favIconUrl,width:"16"},null,8,B),(0,i._)("small",null,(0,u.zw)(a.frame.domain),1)]),(0,i._)("div",G,[(0,i._)("div",{class:(0,u.C_)(["frame-header-status",{active:o.isOpened}]),title:"current status"},[(0,i.Wm)(l,{icon:"tv"})],2),(0,i._)("div",{class:"frame-header-edit",onClick:t[0]||(t[0]=e=>o.toEditMode()),title:"edit frame"},[(0,i.Wm)(l,{icon:"edit"})])])]),(0,i._)("h1",{class:(0,u.C_)(["frame-title",{"current-selected":o.isSelected}]),onClick:t[1]||(t[1]=(0,n.iM)((e=>o.goToPage("new")),["exact"]))},(0,u.zw)(a.frame.title),3),(0,i._)("small",null,(0,u.zw)(a.frame.comment),1),(0,i._)("div",X,[(0,i.Wm)(d,{tags:a.frame.tags,"fixed-tags":a.frame.preProcessedTags,onClickedTag:o.clickedTag},null,8,["tags","fixed-tags","onClickedTag"])])])])}const ee={class:"tags"},te=["onClick"],ae=["onClick"];function ne(e,t,a,n,s,r){return(0,i.wg)(),(0,i.iD)("ul",ee,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.fixedTags,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("a",{class:"tag fixed",onClick:t=>r.clickedTag(e)},(0,u.zw)(e),9,te)])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.tags,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("a",{class:"tag",onClick:t=>r.clickedTag(e)},(0,u.zw)(e),9,ae)])))),128))])}var ie={name:"TagViewContainer",props:["tags","fixedTags"],methods:{clickedTag(e){this.$emit("clickedTag",e)}}};const se=(0,p.Z)(ie,[["render",ne],["__scopeId","data-v-75bacfbc"]]);var re=se,oe=a(65),le=function(e){var t=new URL(e).hostname;return t=t.replace("www.",""),t};function de(e){return e&&e.startsWith("https://")?(e=e.substring(8),e=e.replace("www.",""),e.split("/")[0]):""}function ce(e){if(e.startsWith("chrome"))return"chrome";if(e.includes("localhost"))return"localhost";var t=de(e),a=t.split(".");return"com"===a[a.length-2]?a[a.length-3]:a[a.length-2]}function ue(e){var t=de(e),a=t.split(".");return a.pop(),a=a.filter((function(e){return"com"!==e})),a=a.filter((function(e){return e.length>1})),a}function ge(e,t){void 0===t&&(t=[]);var a=new Array;if(0===e.length)return[];var n=e.map((function(e){return e.tags})).reduce((function(e,t){return e=e.concat(t),e})),i=he(n);return e.forEach((function(e){var n=!!e.url;if(n){var s=e,r=ue(s.url),o=me(s.url,t);o&&r.push(o),a.push({favIconUrl:s.favIconUrl,title:s.title,preProcessedTags:r.map((function(e){return E(e)})).sort((function(e,t){return i.get(e)||0<(i.get(t)||0)?1:-1})),tags:e.tags,domain:le(s.url),updatedAt:e.updatedAt,url:s.url,kind:"url"})}var l=!!e.content;if(l){var d=e;a.push({id:d.id,content:d.content,preProcessedTags:["#note"],tags:e.tags,updatedAt:e.updatedAt,kind:"note"})}e.tags=e.tags.sort((function(e,t){return(i.get(e)||0)<(i.get(t)||0)?1:-1}))})),a}function me(e,t){return t.some((function(t){return t.url===e}))?"#openTab":null}function he(e){var t=new Map;return e.forEach((function(e){t.set(e,(t.get(e)||0)+1)})),t}var fe=(0,oe.MT)({state:function(){return{storage:{kind:"local",accessKey:"",gistID:""},frames:[],clipboard:null,head:{input:""},frameContainer:{currentSelectedFrameIdx:-1},tabs:[]}},getters:{storage:function(e){return e.storage},activeTab:function(e){var t=e.tabs.find((function(e){return e.active}));return t&&t.url?t:null},allTabs:function(e){return e.tabs},frames:function(e){return ge(e.frames,e.tabs)}},mutations:{SET_STORAGE:function(e,t){localStorage.setItem("storage",JSON.stringify(t)),e.storage=t},SET_DATA:function(e,t){e.frames=t.frames,e.storage=t.storage},SET_CLIPBOARD:function(e,t){e.clipboard=t},SET_FRAMES:function(e,t){e.frames=t,localStorage.setItem("frames",JSON.stringify(t))},SET_FRAME:function(e,t){t.updatedAt=Date.now();var a=e.frames.findIndex((function(e){return e.url===t.url}));~a?e.frames[a]=t:e.frames.push(t),localStorage.setItem("frames",JSON.stringify(e.frames))},SET_ALL_TABS:function(e,t){e.tabs=t},SET_NOTE:function(e,t){t.updatedAt=Date.now(),e.frames.push(t),localStorage.setItem("frames",JSON.stringify(e.frames))},UPDATE_NOTE:function(e,t){var a=e.frames.findIndex((function(e){return e.id===t.id}));~a&&(e.frames[a]=t),localStorage.setItem("frames",JSON.stringify(e.frames))},REMOVE_NOTE:function(e,t){var a=e.frames.findIndex((function(e){return e.id===t.id}));~a&&e.frames.splice(a,1),localStorage.setItem("frames",JSON.stringify(e.frames))}},actions:{setClipboard:function(e,t){e.state.clipboard!==t&&e.commit("SET_CLIPBOARD",t)},setAllTabs:function(e,t){e.commit("SET_ALL_TABS",t)},upsertFrame:function(e,t){e.commit("SET_FRAME",t)},insertNote:function(e,t){e.commit("SET_NOTE",t)},updateNote:function(e,t){e.commit("UPDATE_NOTE",t)},removeNote:function(e,t){e.commit("REMOVE_NOTE",t)},setFrames:function(e,t){e.commit("SET_FRAMES",t)},loadState:function(e){var t=[],a=localStorage.getItem("frames");a&&(t=JSON.parse(a));var n={kind:"local"},i=localStorage.getItem("storage");i&&(n=JSON.parse(i)),e.commit("SET_DATA",{frames:t,storage:n})},setStorage:function(e,t){e.commit("SET_STORAGE",t)}},modules:{}}),pe={name:"FrameViewContainer",components:{TagViewContainer:re},emits:["toEditMode","goToPage","selectTag"],props:["frame"],computed:{isOpened(){const e=fe.getters.allTabs;return e.some((e=>e.url===this.frame.url))},tab(){const e=fe.getters.allTabs;return e.find((e=>e.url===this.frame.url))},isSelected(){const e=fe.getters.activeTab;return!!e&&e.url===this.frame.url}},methods:{goToPage(){this.tab?this.port.postMessage({kind:"open-request-existing-tab",tab:this.tab.id}):this.port.postMessage({kind:"open-request-new-tab",url:this.frame.url})},clickedTag(e){this.$emit("selectTag",e)},toEditMode(){this.$emit("toEditMode")}}};const ve=(0,p.Z)(pe,[["render",Q],["__scopeId","data-v-66858ec8"]]);var we=ve;const Te={class:"frame-info-container"},be={key:0,class:"frame-info"},_e={class:"frame-header"},ye={class:"frame-header-left"},De=["src"],ke={class:"frame-header-right"},Ce={class:"tags"};function Se(e,t,a,s,r,o){const l=(0,i.up)("font-awesome-icon"),d=(0,i.up)("TagEditorContainer");return(0,i.wg)(),(0,i.iD)("div",Te,[r.newFrame?((0,i.wg)(),(0,i.iD)("div",be,[(0,i._)("div",_e,[(0,i._)("div",ye,[(0,i._)("img",{src:r.newFrame.favIconUrl,width:"16"},null,8,De),(0,i._)("small",null,(0,u.zw)(o.getDomainFromUrl(r.newFrame.url)),1)]),(0,i._)("div",ke,[(0,i._)("div",{class:"frame-header-view",onClick:t[0]||(t[0]=e=>o.toViewMode())},[(0,i.Wm)(l,{icon:"eye"})]),(0,i._)("div",{class:"frame-header-apply",onClick:t[1]||(t[1]=e=>o.applyChanges())},[(0,i.Wm)(l,{icon:"floppy-disk"})]),(0,i._)("div",{class:"frame-header-remove",onClick:t[2]||(t[2]=e=>o.removeFrame())},[(0,i.Wm)(l,{icon:"trash"})])])]),(0,i._)("h1",{class:"frame-title",onClick:t[3]||(t[3]=e=>o.goToPage())},(0,u.zw)(r.newFrame.title),1),(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.newFrame.comment=e),placeholder:"add comments here"},null,512),[[n.nr,r.newFrame.comment]]),(0,i._)("div",Ce,[(0,i.Wm)(d,{onAddTag:o.addTag,onRemoveTag:o.removeTag,"current-tags":r.newFrame.tags,frames:a.frames},null,8,["onAddTag","onRemoveTag","current-tags","frames"])])])):(0,i.kq)("",!0)])}const Ie={class:"header"},Ae={class:"tag-input-container"},Me={class:"tag-input-left"},xe=["onClick"];function Fe(e,t,a,s,r,o){const l=(0,i.up)("TagListContainer");return(0,i.wg)(),(0,i.iD)("div",Ie,[(0,i._)("div",Ae,[(0,i._)("div",Me,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.allSelectedTags,((e,t)=>((0,i.wg)(),(0,i.iD)("p",{class:"tag-input",key:t},[(0,i._)("span",{onClick:t=>o.removeTag(e)},(0,u.zw)(e),9,xe)])))),128)),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchInput=e),onKeydown:t[1]||(t[1]=(...e)=>o.keydown&&o.keydown(...e)),ref:"input"},null,544),[[n.nr,r.searchInput]])])]),(0,i.Wm)(l,{"initial-show":5,onAddTag:o.addTag,tags:this.setTags,class:"tag-list-container"},null,8,["onAddTag","tags"])])}var Ee={name:"TagEditorContainer",emits:["addTag","removeTag"],components:{TagListContainer:M},props:["currentTags","frames"],data(){return{searchInput:"",selectedTags:[],removedTags:[]}},watch:{selectedTags:{handler(){this.searchInput=""},deep:!0}},computed:{allSelectedTags(){const e=new Set(this.removedTags);return this.currentTags?this.currentTags.filter((t=>!e.has(t))).concat(this.selectedTags):this.selectedTags},setTags(){return O(this.frames,this.selectedTags,this.searchInput)}},methods:{addHashTag(e){return e.startsWith("#")?e:"#"+e},addTag(e){this.$emit("addTag",e.name),this.searchInput=""},keydown(e){"Enter"===e.code&&this.searchInput.length>1&&(this.$emit("addTag",this.addHashTag(this.searchInput)),this.searchInput="",e.preventDefault())},removeTag(e){this.$emit("removeTag",e)}}};const Oe=(0,p.Z)(Ee,[["render",Fe],["__scopeId","data-v-73a013f8"]]);var Ne=Oe,Le={name:"FrameEditorContainer",components:{TagEditorContainer:Ne},emits:["toEditMode","goToPage","toViewMode","applyChanges","removeFrame"],props:["frame","frames"],data(){return{newFrame:null}},methods:{getDomainFromUrl(e){return ue(e).join(" >> ")},goToPage(){this.$emit("goToPage")},addTag(e){this.newFrame.tags.push(e)},removeTag(e){this.newFrame.tags=this.newFrame.tags.filter((t=>t!==e))},clickedTag(e){this.emitter.emit("frame-add-tag-to-selection",{id:this.id,tag:e})},toViewMode(){this.$emit("toViewMode")},removeFrame(){this.newFrame.operation="remove",this.$emit("removeFrame",this.newFrame),this.$emit("toViewMode")},applyChanges(){this.$emit("applyChanges",this.newFrame)}},mounted(){this.newFrame=JSON.parse(JSON.stringify(this.frame))}};const $e=(0,p.Z)(Le,[["render",Se],["__scopeId","data-v-1335c202"]]);var Ve=$e;const We={class:"frame-header-right"},Pe={class:"view"},je={class:"tags"};function Re(e,t,a,n,s,r){const o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagViewContainer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",We,[(0,i._)("div",{class:"frame-header-edit",onClick:t[0]||(t[0]=e=>r.toEditMode()),title:"edit frame"},[(0,i.Wm)(o,{icon:"edit"})])]),(0,i._)("div",Pe,(0,u.zw)(a.note.content),1),(0,i._)("div",je,[(0,i.Wm)(l,{tags:a.note.tags,"fixed-tags":a.note.preProcessedTags,onClickedTag:r.clickedTag},null,8,["tags","fixed-tags","onClickedTag"])])],64)}var qe={name:"NoteViewContainer",components:{TagViewContainer:re},emits:["toEditMode","selectTag"],props:["note"],methods:{toEditMode(){this.$emit("toEditMode")},clickedTag(e){this.$emit("selectTag",e)}}};const ze=(0,p.Z)(qe,[["render",Re],["__scopeId","data-v-06a7a1d0"]]);var Ue=ze,Je={class:"frame-header-right"},Ze={class:"tags"};function Ye(e,t,a,n,s,r){var o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagEditorContainer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Je,[(0,i._)("div",{class:"frame-header-view",onClick:t[0]||(t[0]=function(t){return e.toViewMode()})},[(0,i.Wm)(o,{icon:"eye"})]),(0,i._)("div",{class:(0,u.C_)(["frame-header-apply",{disabled:!e.hasChanges}]),onClick:t[1]||(t[1]=function(t){return e.applyChanges()})},[(0,i.Wm)(o,{icon:"floppy-disk"})],2),(0,i._)("div",{class:"frame-header-remove",onClick:t[2]||(t[2]=function(t){return e.removeNote()})},[(0,i.Wm)(o,{icon:"trash"})])]),(0,i._)("div",{contenteditable:"true",class:"text-area","aria-placeholder":"note here",onFocus:t[3]||(t[3]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.focus&&e.focus.apply(e,t)}),ref:"textArea",onInput:t[4]||(t[4]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.onInput&&e.onInput.apply(e,t)})},null,544),(0,i._)("div",Ze,[(0,i.Wm)(l,{currentTags:e.noteCopy.tags,frames:e.frames,onRemoveTag:e.removeTag,onAddTag:e.addTag},null,8,["currentTags","frames","onRemoveTag","onAddTag"])])],64)}var He=(0,i.aZ)({name:"NoteEditContainer",components:{TagEditorContainer:Ne},emits:["toViewMode"],props:{frames:{type:Object,required:!0},note:{type:Object,required:!0}},data:function(){return{hasChanges:!1,noteCopy:{}}},watch:{},methods:{toViewMode:function(){this.$emit("toViewMode")},removeNote:function(){fe.dispatch("removeNote",this.note),this.$emit("toViewMode")},applyChanges:function(){var e={id:this.noteCopy.id,content:this.noteCopy.content,tags:this.noteCopy.tags,updatedAt:Date.now()};fe.dispatch("updateNote",e),this.$emit("toViewMode")},onInput:function(){this.hasChanges=!0;var e=this.$refs.textArea;this.noteCopy.content=e.innerText},removeTag:function(e){this.hasChanges=!0,this.noteCopy.tags=this.noteCopy.tags.filter((function(t){return t!==e}))},addTag:function(e){this.noteCopy.tags.includes(e)||(this.hasChanges=!0,this.noteCopy.tags.push(e))}},created:function(){this.noteCopy=JSON.parse(JSON.stringify(this.note))},mounted:function(){var e=this.$refs.textArea;e.innerText=this.note.content}});const Ke=(0,p.Z)(He,[["render",Ye],["__scopeId","data-v-6085c89e"]]);var Be=Ke,Ge={name:"FramesContainer",components:{NoteEditContainer:Be,NoteViewContainer:Ue,FrameEditorContainer:Ve,FrameViewContainer:we},emits:["selectTag"],props:["selectedTags"],data(){return{editModeIndex:-1,limit:10}},computed:{totalRemain(){return this.framesFiltered.length-this.limit},frames(){return fe.getters.frames},framesFilteredWithLimit(){return x(this.frames,this.selectedTags).splice(0,this.limit)},framesFiltered(){return x(this.frames,this.selectedTags)}},watch:{selectedTags(){this.limit=10}},methods:{showAll(){this.limit=this.framesFiltered.length},selectTag(e){this.$emit("selectTag",e)},toEditMode(e){this.editModeIndex=e},toViewMode(){this.editModeIndex=-1},applyChanges(e){fe.dispatch("upsertFrame",e),this.editModeIndex=-1},removeFrame(e){fe.dispatch("upsertFrame",e),this.editModeIndex=-1}},mounted(){}};const Xe=(0,p.Z)(Ge,[["render",J],["__scopeId","data-v-9c9070e2"]]);var Qe=Xe;const et={key:0,class:"frame"},tt={class:"frame-info"},at={class:"frame-header"},nt={class:"frame-header-left"},it=["src"],st={class:"frame-header-right"},rt={class:"frame-title"},ot={class:"tags"},lt={key:0};function dt(e,t,a,n,s,r){const o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagViewContainer");return r.tabDetail?((0,i.wg)(),(0,i.iD)("div",et,[(0,i._)("div",tt,[(0,i._)("div",at,[(0,i._)("div",nt,[(0,i._)("img",{src:r.tabDetail.favIconUrl,width:"16"},null,8,it),(0,i._)("small",null,(0,u.zw)(r.getDomainFromUrl(r.tabDetail.url)),1)]),(0,i._)("div",st,[a.tags.length>0?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"frame-header-add",onClick:t[0]||(t[0]=(...e)=>r.addNew&&r.addNew(...e)),title:"add new frame"},[(0,i.Wm)(o,{icon:"fa-arrow-up-right-from-square"})])):(0,i.kq)("",!0)])]),(0,i._)("h1",rt,(0,u.zw)(r.tabDetail.title),1),(0,i._)("div",ot,[(0,i.Wm)(l,{tags:a.tags,"fixed-tags":r.getDomainsFromUrl(r.tabDetail.url)},null,8,["tags","fixed-tags"])]),0===a.tags.length?((0,i.wg)(),(0,i.iD)("small",lt,"(need to add tags before save)")):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)}var ct={name:"FrameToAddContainer",components:{TagViewContainer:re},props:["tags"],methods:{getDomainFromUrl(e){return ce(e)},getDomainsFromUrl(e){return ue(e)},addNew(){fe.dispatch("upsertFrame",{url:this.tabDetail.url,title:this.tabDetail.title,tags:this.tags,favIconUrl:this.tabDetail.favIconUrl})}},computed:{tabDetail(){const e=this.$store.getters.activeTab,t=this.$store.getters.frames;return e&&e.url?t.findLast((t=>t.url===e.url))?null:e.url?{url:e.url,title:e.title,favIconUrl:e.favIconUrl,newFrame:!0}:null:null}},watch:{}};const ut=(0,p.Z)(ct,[["render",dt],["__scopeId","data-v-20b596fb"]]);var gt=ut,mt={class:"frame-header-right"},ht={class:"tags"};function ft(e,t,a,n,s,r){var o=(0,i.up)("font-awesome-icon"),l=(0,i.up)("TagViewContainer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",mt,[e.hasChanges?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"frame-header-apply",onClick:t[0]||(t[0]=function(t){return e.applyChanges()})},[(0,i.Wm)(o,{icon:"floppy-disk"})])):(0,i.kq)("",!0),(0,i._)("div",{class:"frame-header-remove",onClick:t[1]||(t[1]=function(t){return e.removeFrame()})},[(0,i.Wm)(o,{icon:"trash"})])]),(0,i._)("div",{contenteditable:"true",class:"text-area","aria-placeholder":"note here",onFocus:t[2]||(t[2]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.focus&&e.focus.apply(e,t)}),ref:"textArea",onInput:t[3]||(t[3]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.onInput&&e.onInput.apply(e,t)})},"add text here...",544),(0,i._)("div",ht,[(0,i.Wm)(l,{tags:e.tags},null,8,["tags"])])],64)}var pt=(0,i.aZ)({name:"NewNoteContainer",components:{TagViewContainer:re},props:["tags"],data:function(){return{hasChanges:!1}},methods:{onInput:function(){this.hasChanges=!0},focus:function(){var e=this.$refs.textArea;"add text here..."===e.innerText&&(e.innerText="")},applyChanges:function(){var e=this.$refs.textArea,t={id:Math.floor(1e9*Math.random()).toFixed(0),content:e.innerText,tags:this.tags,updatedAt:Date.now()};fe.dispatch("insertNote",t),this.hasChanges=!1,e.innerText="add text here..."},removeFrame:function(){var e=this.$refs.textArea;this.hasChanges=!1,e.innerText="add text here..."}}});const vt=(0,p.Z)(pt,[["render",ft],["__scopeId","data-v-cb6f8b32"]]);var wt=vt,Tt={name:"TabFrameSearch",components:{NewNoteContainer:wt,FrameToAddContainer:gt,FramesContainer:Qe,SearchContainer:$,TabContainer:w},data(){return{tagToAdd:null,selectedTags:[],clipboard:null}},computed:{},methods:{getClipboard(){navigator.clipboard.readText().then((e=>{this.clipboard=e}))},selectTag(e){this.tagToAdd=e},addLink(){console.log(this.clipboard)},setSelectedTags(e){this.selectedTags=e}}};const bt=(0,p.Z)(Tt,[["render",c]]);var _t=bt;function yt(e,t,a,n,s,r){const o=(0,i.up)("SetStorageContainer"),l=(0,i.up)("TabContainer"),d=(0,i.up)("GistPushData"),c=(0,i.up)("GistPullData");return(0,i.wg)(),(0,i.j4)(l,{title:"sync options",subtitle:r.subtitle},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{title:"set storage",padding:"5px","padding-left":"10px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(o)])),_:1}),"gist"===r.storage.kind?((0,i.wg)(),(0,i.j4)(l,{key:0,title:"gist push data","default-activation":!0,padding:"5px","padding-left":"10px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(d)])),_:1})):(0,i.kq)("",!0),"gist"===r.storage.kind?((0,i.wg)(),(0,i.j4)(l,{key:1,title:"gist pull data","default-activation":!1,padding:"5px","padding-left":"10px","is-inner":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(c)])),_:1})):(0,i.kq)("",!0)])),_:1},8,["subtitle"])}var Dt=a(3642);function kt(e,t,a){var n=JSON.parse(JSON.stringify(t)),i=[],s=new Array,r=[],o=!1;return e.forEach((function(e){var r=!!e.url,l=!!e.content,d=t.findIndex((function(t){return r?t.url===e.url:t.id===e.id}));~d?(e.updatedAt>t[d].updatedAt||a&&e.updatedAt<t[d].updatedAt)&&(o=!0,r&&s.push(Ct(e,n[d])),l&&s.push(St(e,n[d])),n[d]=e):(o=!0,i.push(e),n.push(e))})),n=n.filter((function(t){var a=!!t.url,n=e.findIndex((function(e){return a?e.url===t.url:e.id===t.id}));return-1!==n||(o=!0,r.push(t),!1)})),{hasChanges:o,frames:n,itemsRemoved:r,itemsAdded:i,itemsModified:s}}function Ct(e,t){var a=null,n=null;e.comment!==t.comment&&(n=t.comment?t.comment:"",a=e.comment?e.comment:"");var i=null,s=null;e.title!==t.title&&(i=e.title?e.title:null,s=t.title?t.title:null);var r=e.tags?e.tags.filter((function(e){return!(t.tags&&t.tags.includes(e))})):[],o=t.tags?t.tags.filter((function(t){return!(e.tags&&e.tags.includes(t))})):[];return{url:e.url,newComment:a,oldComment:n,newTitle:i,oldTitle:s,tagsToAdd:r,tagsToRemove:o}}function St(e,t){var a=null,n=null;e.content!==t.content&&(n=t.content?t.content:"",a=e.content?e.content:"");var i=e.tags?e.tags.filter((function(e){return!(t.tags&&t.tags.includes(e))})):[],s=t.tags?t.tags.filter((function(t){return!(e.tags&&e.tags.includes(t))})):[];return{oldContent:n,newContent:a,tagsToAdd:i,tagsToRemove:s}}var It=a(7063);const At={class:"form"},Mt={key:0,class:"lm-form_line"},xt={class:"lm-columns"},Ft={class:"lm-column"},Et=(0,i._)("label",null,"default storage name:",-1),Ot=(0,i._)("br",null,null,-1),Nt=["disabled"],Lt={class:"lm-form_line"},$t={class:"lm-columns"},Vt={class:"lm-column"},Wt=(0,i._)("label",null,"Storage kind:",-1),Pt=["disabled"],jt=(0,i._)("option",null,"local",-1),Rt=(0,i._)("option",null,"gist",-1),qt=[jt,Rt],zt={key:1,class:"lm-form_line"},Ut={class:"lm-columns"},Jt={class:"lm-column"},Zt=(0,i._)("label",null,"gist access key:",-1),Yt=(0,i._)("br",null,null,-1),Ht=["disabled"],Kt={class:"lm-column"},Bt=(0,i._)("label",null,"gist ID:",-1),Gt=(0,i._)("br",null,null,-1),Xt=["disabled"],Qt={class:"bottom-button-container"};function ea(e,t,a,s,r,o){return(0,i.wg)(),(0,i.iD)("div",At,["gist"===o.storage.kind?((0,i.wg)(),(0,i.iD)("div",Mt,[(0,i._)("div",xt,[(0,i._)("div",Ft,[Et,Ot,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.storage.name=e),disabled:!r.editMode},null,8,Nt),[[n.nr,o.storage.name]])])])])):(0,i.kq)("",!0),(0,i._)("div",Lt,[(0,i._)("div",$t,[(0,i._)("div",Vt,[Wt,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.storage.kind=e),disabled:!r.editMode},qt,8,Pt),[[n.bM,o.storage.kind]])])])]),"gist"===o.storage.kind?((0,i.wg)(),(0,i.iD)("div",zt,[(0,i._)("div",Ut,[(0,i._)("div",Jt,[Zt,Yt,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.storage.accessKey=e),disabled:!r.editMode},null,8,Ht),[[n.nr,o.storage.accessKey]])]),(0,i._)("div",Kt,[Bt,Gt,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.storage.gistID=e),disabled:!r.editMode},null,8,Xt),[[n.nr,o.storage.gistID]])])])])):(0,i.kq)("",!0),(0,i._)("div",Qt,[r.editMode?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"grey",onClick:t[4]||(t[4]=e=>r.editMode=!0)},"edit")),r.editMode?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"yellow",onClick:t[5]||(t[5]=e=>o.setStorage())},"save")):(0,i.kq)("",!0)])])}var ta={name:"SetStorageContainer",data(){return{octokit:null,editMode:!1}},computed:{storage(){return fe.getters.storage}},methods:{setStorage(){this.editMode=!1,fe.dispatch("setStorage",this.storage)}}};const aa=(0,p.Z)(ta,[["render",ea]]);var na=aa;const ia=e=>((0,i.dD)("data-v-038e8746"),e=e(),(0,i.Cn)(),e),sa={class:"container"},ra={key:0,class:"overview"},oa={class:"overview-item add"},la={class:"overview-item remove"},da={class:"overview-item change"},ca={key:1,class:"overview"},ua=ia((()=>(0,i._)("div",{class:"overview-item add"},"add: - ",-1))),ga=ia((()=>(0,i._)("div",{class:"overview-item remove"},"remove: - ",-1))),ma=ia((()=>(0,i._)("div",{class:"overview-item change"},"modify: - ",-1))),ha=[ua,ga,ma],fa={class:"bottom-button-container"},pa=["disabled"],va={key:1,class:"error"};function wa(e,t,a,n,s,r){const o=(0,i.up)("LoadingContainer");return(0,i.wg)(),(0,i.iD)("div",sa,[s.isLoading?((0,i.wg)(),(0,i.j4)(o,{key:0})):(0,i.kq)("",!0),(0,i._)("div",null,[s.mergedData?((0,i.wg)(),(0,i.iD)("div",ra,[(0,i._)("div",oa,"add: "+(0,u.zw)(s.mergedData.itemsAdded.length),1),(0,i._)("div",la,"remove: "+(0,u.zw)(s.mergedData.itemsRemoved.length),1),(0,i._)("div",da,"modify: "+(0,u.zw)(s.mergedData.itemsModified.length),1)])):(0,i.kq)("",!0),s.mergedData?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ca,ha))]),(0,i._)("div",fa,[(0,i._)("button",{class:"yellow",onClick:t[0]||(t[0]=(...e)=>r.fetchData&&r.fetchData(...e))},"fetch data"),(0,i._)("button",{class:"blue",onClick:t[1]||(t[1]=(...e)=>r.pushData&&r.pushData(...e)),disabled:!(s.mergedData&&s.mergedData.hasChanges)},"push",8,pa)]),s.error?((0,i.wg)(),(0,i.iD)("small",va,"Error: "+(0,u.zw)(s.error),1)):(0,i.kq)("",!0)])}const Ta=e=>((0,i.dD)("data-v-1369f520"),e=e(),(0,i.Cn)(),e),ba={class:"loading-container"},_a=Ta((()=>(0,i._)("div",{class:"ring-container"},[(0,i._)("div",{class:"lds-dual-ring"})],-1))),ya=[_a];function Da(e,t,a,n,s,r){return(0,i.wg)(),(0,i.iD)("div",ba,ya)}var ka={name:"LoadingContainer"};const Ca=(0,p.Z)(ka,[["render",Da],["__scopeId","data-v-1369f520"]]);var Sa=Ca,Ia={name:"GistPushData",components:{LoadingContainer:Sa},data(){return{error:null,mergedData:null,isLoading:!1}},methods:{fetchData(){this.error=null,this.isLoading=!0;const e=fe.getters.storage,t=new Dt.vd({auth:e.accessKey});t.rest.users.getAuthenticated().then((()=>{t.rest.gists.get({gist_id:e.gistID}).then((t=>{const a=`${e.name}_frames.json`,n=t.data.files[a];if(n){const e=JSON.parse(n.content),t=(0,It.Lj)(e);this.mergedData=kt(fe.getters.frames,t)}else this.mergedData=kt(fe.getters.frames,[])})).finally((()=>this.isLoading=!1))})).catch((e=>{this.isLoading=!1,this.error=e.message}))},pushData(){this.error=null,this.isLoading=!0;const e={},t=fe.getters.storage;e[t.name+"_frames.json"]={content:JSON.stringify((0,It.nN)(this.mergedData.frames))};const a=new Dt.vd({auth:t.accessKey});a.rest.users.getAuthenticated().then((()=>{a.rest.gists.update({gist_id:t.gistID,files:e}).then((()=>{this.mergedData=null})).catch((e=>{this.error=e.message})).finally((()=>{this.isLoading=!1}))})).catch((e=>{this.isLoading=!1,this.error=e.message}))}}};const Aa=(0,p.Z)(Ia,[["render",wa],["__scopeId","data-v-038e8746"]]);var Ma=Aa;const xa=e=>((0,i.dD)("data-v-4e8ba957"),e=e(),(0,i.Cn)(),e),Fa={class:"container"},Ea={key:0,class:"overview"},Oa={class:"overview-item add"},Na={class:"overview-item remove"},La={class:"overview-item change"},$a={key:1,class:"overview"},Va=xa((()=>(0,i._)("div",{class:"overview-item add"},"add: - ",-1))),Wa=xa((()=>(0,i._)("div",{class:"overview-item remove"},"remove: - ",-1))),Pa=xa((()=>(0,i._)("div",{class:"overview-item change"},"modify: - ",-1))),ja=[Va,Wa,Pa],Ra={class:"bottom-button-container"},qa=["disabled"],za={key:1,class:"error"};function Ua(e,t,a,n,s,r){const o=(0,i.up)("LoadingContainer");return(0,i.wg)(),(0,i.iD)("div",Fa,[s.isLoading?((0,i.wg)(),(0,i.j4)(o,{key:0})):(0,i.kq)("",!0),(0,i._)("div",null,[s.mergedData?((0,i.wg)(),(0,i.iD)("div",Ea,[(0,i._)("div",Oa,"add: "+(0,u.zw)(s.mergedData.itemsAdded.length),1),(0,i._)("div",Na,"remove: "+(0,u.zw)(s.mergedData.itemsRemoved.length),1),(0,i._)("div",La,"modify: "+(0,u.zw)(s.mergedData.itemsModified.length),1)])):(0,i.kq)("",!0),s.mergedData?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",$a,ja))]),(0,i._)("div",Ra,[(0,i._)("button",{class:"yellow",onClick:t[0]||(t[0]=(...e)=>r.fetchData&&r.fetchData(...e))},"fetch data"),(0,i._)("button",{class:"blue",onClick:t[1]||(t[1]=(...e)=>r.pullData&&r.pullData(...e)),disabled:!(s.mergedData&&s.mergedData.hasChanges)},"pull",8,qa)]),s.error?((0,i.wg)(),(0,i.iD)("small",za,"Error: "+(0,u.zw)(s.error),1)):(0,i.kq)("",!0)])}var Ja={name:"GistPullData",components:{LoadingContainer:Sa},data(){return{error:null,mergedData:null,isLoading:!1}},methods:{fetchData(){this.error=null,this.isLoading=!0;const e=fe.getters.storage,t=new Dt.vd({auth:e.accessKey});t.rest.users.getAuthenticated().then((()=>{t.rest.gists.get({gist_id:e.gistID}).then((t=>{const a=`${e.name}_frames.json`,n=t.data.files[a];if(n){const e=JSON.parse(n.content),t=(0,It.Lj)(e);this.mergedData=kt(t,fe.getters.frames,!0)}else this.error="cannot find previews data"})).finally((()=>this.isLoading=!1))})).catch((e=>{this.isLoading=!1,this.error=e.message}))},pullData(){fe.dispatch("setFrames",this.mergedData.frames),this.error=null,this.mergedData=null}}};const Za=(0,p.Z)(Ja,[["render",Ua],["__scopeId","data-v-4e8ba957"]]);var Ya=Za,Ha={name:"TabSyncOptions",components:{GistPullData:Ya,GistPushData:Ma,SetStorageContainer:na,TabContainer:w},data(){return{remoteDetail:{status:"none",mergeToRemoteDetail:{},mergeToLocalDetail:{},hasFile:!1,data:null},octokit:null,editMode:!1,log:"need fetch data"}},computed:{storage(){return fe.getters.storage},subtitle(){return"kind "+this.storage.kind},canSync(){if(this.remoteDetail.mergeToRemoteDetail){const e=this.remoteDetail.mergeToRemoteDetail;if(e.itemsAdded>0||e.itemsRemoved>0||e.itemsModified>0)return!0}return!1}},methods:{setStorage(){this.editMode=!1,fe.dispatch("setStorage",this.storage)},async authGist(){const e=new Dt.vd({auth:this.storage.accessKey});e.rest.users.getAuthenticated().then((()=>{this.octokit=e})).catch((e=>{this.log="error: "+e.message}))},fetch(){this.octokit.rest.gists.get({gist_id:this.storage.gistID}).then((e=>{const t=e.data,a=`${this.storage.name}_frames.json`,n=t.files[a];if(this.remoteDetail.status="fetched",n){this.remoteDetail.hasFile=!0;const e=JSON.parse(n.content),t=(0,It.Lj)(e);this.remoteDetail.remoteFrames=t,this.remoteDetail.mergeToRemoteDetail=kt(fe.getters.frames,t),this.remoteDetail.mergeToLocalDetail=kt(t,fe.getters.frames);const a=this.remoteDetail.mergeToRemoteDetail,i=this.remoteDetail.mergeToLocalDetail;this.log=`push: add: ${a.itemsAdded.length} / remove: ${a.itemsRemoved.length} / change: ${a.itemsModified.length}`,this.log+=` || pull: add: ${i.itemsAdded.length} / remove: ${i.itemsRemoved.length} / change: ${i.itemsModified.length}`}else this.remoteDetail.mergeToRemoteDetail=kt(fe.getters.frames,[]),this.remoteDetail.mergeToLocalDetail=kt([],fe.getters.frames),this.log=`cannot find [${a}], it will create during push process`})).catch((e=>{this.log="error: "+e.message}))},push(){const e={};e[this.storage.name+"_frames.json"]={content:JSON.stringify((0,It.nN)(this.remoteDetail.mergeToRemoteDetail.frames))},this.octokit.rest.gists.update({gist_id:this.storage.gistID,files:e}).then((e=>{console.log(e),this.fetchData=null})).catch((e=>{this.log="error: "+e.message}))},pull(){fe.dispatch("setFrames",this.remoteDetail.remoteFrames),this.remoteDetail={status:"none"},this.log="pull completed"}},mounted(){}};const Ka=(0,p.Z)(Ha,[["render",yt]]);var Ba=Ka,Ga={name:"RadarView",components:{TabSyncOptions:Ba,TabFrameSearch:_t},data(){return{hasPlugin:!1}},methods:{},created(){},mounted(){this.port&&(this.hasPlugin=!0,this.port.postMessage({kind:"all-tabs-request"}),fe.dispatch("loadState"))}};const Xa=(0,p.Z)(Ga,[["render",d],["__scopeId","data-v-9da08efc"]]);var Qa=Xa,en={components:{RadarView:Qa}};const tn=(0,p.Z)(en,[["render",s]]);var an=tn,nn=a(1373),sn=function(e,t,a,n){function i(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):i(e.value).then(r,o)}l((n=n.apply(e,t||[])).next())}))},rn=function(e,t){var a,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(s){if(a)throw new TypeError("Generator is already executing.");while(r)try{if(a=1,n&&(i=2&s[0]?n["return"]:s[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(o){s=[6,o],n=0}finally{a=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},on=function(){function e(){}return Object.defineProperty(e.prototype,"login",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return sn(this,void 0,void 0,(function(){var t;return rn(this,(function(a){return t=new Dt.vd({auth:e}),console.log(t),t.rest.users.getAuthenticated().then((function(e){return console.log("success"),e})).catch((function(e){return console.log("error: ",e),!1})),[2]}))}))}}),e}(),ln=function(){function e(e,t){Object.defineProperty(this,"emitter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"port",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.emitter=t,this.id=e}return Object.defineProperty(e.prototype,"connect",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.port=chrome.runtime.connect(this.id,{name:"dashboard"}),this.port.onMessage.addListener((function(t){"load-response"===t.kind&&e.emitter.emit("load-response",t),"all-tabs-response"===t.kind&&(console.log("all-tabs-response:: ",t.data),fe.dispatch("setAllTabs",t.data))})),this.port.onDisconnect.addListener((function(){setTimeout((function(){e.connect()}),100),console.log("port.onDisconnect")}))}}),Object.defineProperty(e.prototype,"postMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.port.postMessage(e)}}),e}(),dn=a(3494),cn=a(8539),un=a(7749);dn.vI.add(cn.Mdf,cn.Xcf,cn.EdJ,cn.$aW,cn.bgy,cn.wlW);var gn=(0,nn.Z)(),mn=(0,n.ri)(an);try{var hn=new ln("aekckpbdaninhmbbajcpedhaidaeofdh",gn);hn.connect(),mn.config.globalProperties.port=hn}catch(fn){console.log("error!")}mn.config.globalProperties.emitter=gn,mn.config.globalProperties.github=new on,setInterval((function(){navigator.clipboard.readText().then((function(e){fe.dispatch("setClipboard",e)})).catch((function(){}))}),500),mn.use(fe).component("font-awesome-icon",un.GN).mount("#app")},5696:function(){}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,s){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],s=e[c][2];for(var o=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(o=!1,s<r&&(r=s));if(o){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,i,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,r=n[0],o=n[1],l=n[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var c=l(a)}for(t&&t(n);d<r.length;d++)s=r[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},n=self["webpackChunklomni"]=self["webpackChunklomni"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7065)}));n=a.O(n)})();
//# sourceMappingURL=app.955e637f.js.map